<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Portail sécurisé</title>
  <style>
    :root{
      --w95-bg:#008080;
      --w95-face:#c0c0c0;
      --w95-shadow:#808080;
      --w95-highlight:#ffffff;
      --w95-text:#000000;
      --w95-title:#000080;
      --w95-title-text:#ffffff;
      --danger:#8b0000;
      --ok:#0b6b0b;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    *{ box-sizing:border-box; }
    body{ margin:0; font-family:var(--sans); background:#0b0b0f; color:#111; }

    /* Pages */
    .page{ display:none; min-height:100vh; }
    .page.active{ display:block; }

    /* Fake Apple login lure */
    .apple{
      background: radial-gradient(1200px 600px at 20% 10%, rgba(255,255,255,.14), transparent 60%),
                  radial-gradient(900px 500px at 80% 40%, rgba(255,255,255,.10), transparent 60%),
                  linear-gradient(180deg, #0b0b12, #06060b);
      color:#f3f4f6;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:32px;
    }
    .apple-card{
      width:min(420px, 92vw);
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      backdrop-filter: blur(12px);
      border-radius: 18px;
      padding: 22px;
      box-shadow: 0 18px 60px rgba(0,0,0,.55);
    }
    .apple-top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom: 18px;
    }
    .apple-logo{
      width:34px;
      height:34px;
      border-radius: 10px;
      background: linear-gradient(180deg, rgba(255,255,255,.9), rgba(255,255,255,.3));
      box-shadow: inset 0 0 0 1px rgba(0,0,0,.25);
      display:grid;
      place-items:center;
      color:#111;
      font-weight:700;
    }
    .apple-title{
      font-size:14px;
      opacity:.85;
      letter-spacing:.12em;
      text-transform:uppercase;
    }
    .apple-h1{
      font-size:22px;
      margin: 8px 0 6px;
      letter-spacing:.02em;
    }
    .apple-sub{
      margin:0 0 18px;
      opacity:.8;
      font-size:14px;
      line-height:1.4;
    }
    .apple-field{
      display:flex;
      flex-direction:column;
      gap:8px;
      margin-bottom: 12px;
    }
    .apple-label{ font-size:12px; opacity:.85; }
    .apple-input{
      width:100%;
      padding: 12px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.25);
      color:#fff;
      outline:none;
      font-size: 14px;
    }
    .apple-input:focus{ border-color: rgba(255,255,255,.28); }
    .apple-row{
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      margin-top: 14px;
    }
    .apple-btn{
      width:100%;
      padding: 12px 14px;
      border-radius: 12px;
      border: none;
      background: linear-gradient(180deg, #ffffff, #dcdfe6);
      color:#0b0b12;
      font-weight:700;
      cursor:pointer;
      box-shadow: 0 10px 26px rgba(0,0,0,.35);
    }
    .apple-btn:active{ transform: translateY(1px); }
    .apple-foot{
      margin-top:14px;
      font-size:12px;
      opacity:.7;
      display:flex;
      justify-content:space-between;
      gap:12px;
    }
    .hint{ opacity:.75; font-family: var(--mono); }

    /* Transition full screen, Win95 loader */
    .loader{
      background: #000;
      color:#bdbdbd;
      font-family: var(--mono);
      padding: 0;
      display:grid;
      place-items:center;
    }
    .loader-box{
      width:min(680px, 92vw);
      border: 2px solid #1c1c1c;
      background: #0a0a0a;
      padding: 18px;
      box-shadow: 0 0 0 1px #2e2e2e;
    }
    .loader-title{
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin-bottom: 14px;
      color:#e7e7e7;
      font-size: 14px;
    }
    .loader-bar{
      height: 22px;
      border: 2px solid #3a3a3a;
      background:#111;
      position:relative;
      overflow:hidden;
    }
    .loader-fill{
      height:100%;
      width: 0%;
      background: repeating-linear-gradient(
        90deg,
        #c0c0c0 0 14px,
        #9a9a9a 14px 28px
      );
    }
    .loader-lines{
      margin-top: 14px;
      font-size: 12px;
      line-height: 1.6;
      opacity:.9;
      height: 120px;
      overflow:hidden;
      border-top: 1px solid #1f1f1f;
      padding-top: 12px;
    }

    /* Win95 desktop */
    .w95{
      background: var(--w95-bg);
      font-family: "MS Sans Serif", Tahoma, var(--sans);
      color: var(--w95-text);
      padding: 14px;
      min-height:100vh;
    }
    .taskbar{
      position: fixed;
      left:0;
      right:0;
      bottom:0;
      height: 40px;
      background: var(--w95-face);
      border-top: 2px solid var(--w95-highlight);
      box-shadow: inset 0 2px 0 var(--w95-highlight);
      display:flex;
      align-items:center;
      gap:10px;
      padding: 6px 8px;
    }
    .start{
      padding: 6px 10px;
      background: var(--w95-face);
      border: 2px solid var(--w95-shadow);
      border-top-color: var(--w95-highlight);
      border-left-color: var(--w95-highlight);
      font-weight:700;
      cursor:pointer;
      display:flex;
      align-items:center;
      gap:8px;
    }
    .clock{
      margin-left:auto;
      padding: 4px 8px;
      border: 2px solid var(--w95-shadow);
      border-top-color: var(--w95-highlight);
      border-left-color: var(--w95-highlight);
      font-family: var(--mono);
      font-size: 12px;
      background: var(--w95-face);
    }

    .window{
      width:min(980px, 96vw);
      margin: 10px auto 68px;
      background: var(--w95-face);
      border: 2px solid var(--w95-shadow);
      border-top-color: var(--w95-highlight);
      border-left-color: var(--w95-highlight);
      box-shadow: 2px 2px 0 #00000033;
    }
    .titlebar{
      background: var(--w95-title);
      color: var(--w95-title-text);
      padding: 6px 8px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      font-weight:700;
      user-select:none;
    }
    .titlebar small{
      font-weight:400;
      opacity:.9;
      font-family: var(--mono);
    }
    .win-controls{
      display:flex;
      gap:6px;
    }
    .win-btn{
      width: 18px;
      height: 18px;
      background: var(--w95-face);
      border: 2px solid var(--w95-shadow);
      border-top-color: var(--w95-highlight);
      border-left-color: var(--w95-highlight);
    }
    .menubar{
      padding: 6px 8px;
      border-bottom: 1px solid var(--w95-shadow);
      display:flex;
      gap:10px;
      font-size: 13px;
    }
    .tabs{
      display:flex;
      gap:6px;
      padding: 8px;
      border-bottom: 1px solid var(--w95-shadow);
    }
    .tab{
      padding: 6px 10px;
      background: var(--w95-face);
      border: 2px solid var(--w95-shadow);
      border-top-color: var(--w95-highlight);
      border-left-color: var(--w95-highlight);
      cursor:pointer;
      font-weight:700;
      font-size: 13px;
    }
    .tab.active{
      box-shadow: inset 2px 2px 0 #00000022;
      transform: translateY(1px);
    }
    .content{
      padding: 10px 10px 14px;
    }
    .meta{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      margin-bottom: 10px;
    }
    .badge{
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding: 4px 8px;
      background: #e9e9e9;
      border: 2px solid var(--w95-shadow);
      border-top-color: var(--w95-highlight);
      border-left-color: var(--w95-highlight);
      font-family: var(--mono);
      font-size: 12px;
    }
    .btn{
      padding: 6px 10px;
      background: var(--w95-face);
      border: 2px solid var(--w95-shadow);
      border-top-color: var(--w95-highlight);
      border-left-color: var(--w95-highlight);
      cursor:pointer;
      font-weight:700;
      font-size: 13px;
    }
    .btn:active{ transform: translateY(1px); }

    table{
      width:100%;
      border-collapse: separate;
      border-spacing: 0;
      font-size: 13px;
    }
    th, td{
      padding: 7px 8px;
      border-right: 1px solid #9a9a9a;
      border-bottom: 1px solid #9a9a9a;
      vertical-align:top;
    }
    th{
      background: #dedede;
      border-top: 1px solid #fff;
      border-left: 1px solid #fff;
      text-align:left;
      font-weight:700;
    }
    tr td:first-child, tr th:first-child{ border-left: 1px solid #fff; }
    thead tr:first-child th{ border-top: 1px solid #fff; }
    tbody tr{ background:#f2f2f2; }
    tbody tr:nth-child(even){ background:#ededed; }

    .redact{
      display:inline-block;
      padding: 0 6px;
      background:#0b0b0b;
      color:#0b0b0b;
      border-radius: 2px;
      user-select:none;
      min-width: 120px;
    }
    .mono{ font-family: var(--mono); }
    .note{
      margin-top: 10px;
      font-size: 12px;
      opacity:.9;
      background:#efefef;
      border: 2px solid var(--w95-shadow);
      border-top-color: var(--w95-highlight);
      border-left-color: var(--w95-highlight);
      padding: 8px;
    }
    .danger{
      color:#fff;
      background: var(--danger);
      padding: 2px 6px;
      border-radius: 3px;
      font-weight:700;
      font-family: var(--mono);
      font-size: 12px;
      display:inline-block;
    }
    .ok{
      color:#fff;
      background: var(--ok);
      padding: 2px 6px;
      border-radius: 3px;
      font-weight:700;
      font-family: var(--mono);
      font-size: 12px;
      display:inline-block;
    }
  </style>
</head>
<body>

  <!-- Page 1: Apple style login lure -->
  <section id="page-login" class="page apple active" aria-label="Connexion">
    <div class="apple-card">
      <div class="apple-top">
        <div class="apple-logo"></div>
        <div class="apple-title">Secure ID</div>
      </div>

      <div class="apple-h1">Connexion</div>
      <p class="apple-sub">Saisis ton identifiant et ton mot de passe pour accéder au portail.</p>

      <div class="apple-field">
        <div class="apple-label">Identifiant (4 chiffres)</div>
        <input id="login-id" class="apple-input" inputmode="numeric" autocomplete="off" maxlength="4" placeholder="0175" />
      </div>

      <div class="apple-field">
        <div class="apple-label">Mot de passe</div>
        <input id="login-pass" class="apple-input" type="password" autocomplete="off" placeholder="••••" />
      </div>

      <button id="login-btn" class="apple-btn">Se connecter</button>

      <div class="apple-foot">
        <span class="hint">PWD: 1234</span>
        <span id="login-msg" aria-live="polite"></span>
      </div>
    </div>
  </section>

  <!-- Page 2: Full screen long Win95 loader -->
  <section id="page-loader" class="page loader" aria-label="Initialisation">
    <div class="loader-box">
      <div class="loader-title">
        <div>Microsoft Windows 95</div>
        <div class="mono" id="loader-pct">0%</div>
      </div>
      <div class="loader-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
        <div class="loader-fill" id="loader-fill"></div>
      </div>
      <div class="loader-lines mono" id="loader-lines"></div>
    </div>
  </section>

  <!-- Page 3: Win95 site -->
  <section id="page-w95" class="page w95" aria-label="Système">
    <div class="window" role="application" aria-label="Console d'accès">
      <div class="titlebar">
        <div>ATLOC OPS <small id="session-meta"></small></div>
        <div class="win-controls" aria-hidden="true">
          <div class="win-btn"></div>
          <div class="win-btn"></div>
          <div class="win-btn"></div>
        </div>
      </div>

      <div class="menubar">
        <span>Fichier</span>
        <span>Affichage</span>
        <span>Outils</span>
        <span>Aide</span>
      </div>

      <div class="tabs" role="tablist" aria-label="Onglets">
        <button class="tab active" id="tab-dossier" role="tab" aria-selected="true">Dossier</button>
        <button class="tab" id="tab-incident" role="tab" aria-selected="false">Incident</button>
      </div>

      <div class="content">
        <div class="meta">
          <div class="badge">ID: <span id="who-id">0000</span></div>
          <div class="badge">Niveau: <span id="who-level">0</span> / 10</div>
          <button class="btn" id="logout">Déconnexion</button>
        </div>

        <div id="view-dossier">
          <table aria-label="Dossiers enfants">
            <thead>
              <tr id="dossier-head"></tr>
            </thead>
            <tbody id="dossier-body"></tbody>
          </table>

          <div class="note">
            Règle d’affichage dossiers
            <span class="mono">L1</span> identifiant
            <span class="mono">L2</span> date entrée
            <span class="mono">L3</span> résidence
            <span class="mono">L4</span> stabilité
            <span class="mono">L5</span> raison placement
            <span class="mono">L6</span> école
            <span class="mono">L7</span> adresse Atloc
            <span class="mono">L8</span> dangerosité
            <span class="mono">L9</span> rattachement
            <span class="mono">L10</span> accès complet
          </div>
        </div>

        <div id="view-incident" style="display:none;">
          <table aria-label="Incidents">
            <thead>
              <tr>
                <th>Enfant</th>
                <th>Incident</th>
                <th>Maison du décès</th>
                <th>Lieu</th>
                <th>Dommages collatéraux</th>
                <th>Statut fantôme</th>
              </tr>
            </thead>
            <tbody id="incident-body"></tbody>
          </table>

          <div class="note">
            Règle d’affichage incidents
            <span class="mono">L1 à L6</span> enfant et terme incident
            <span class="mono">L7+</span> maison du décès
            <span class="mono">L8+</span> lieu
            <span class="mono">L9+</span> dommages collatéraux
            <span class="mono">L10</span> statut fantôme
          </div>
        </div>
      </div>
    </div>

    <div class="taskbar" aria-label="Barre des tâches">
      <div class="start">Démarrer</div>
      <div class="badge">ATLOC://INTRANET</div>
      <div class="clock" id="clock">00:00</div>
    </div>
  </section>

  <script>
    "use strict";

    /* Identifiants et niveaux */
    const credentials = {
      "0175": 3,
      "0176": 3,

      "0001": 1,
      "0002": 2,
      "0100": 4,
      "0111": 5,
      "0122": 6,
      "0133": 7,
      "0144": 8,
      "0155": 9,
      "0166": 10,

      "0999": 10
    };

    const FIXED_PASSWORD = "1234";

    /* Données enfants */
    const children = [
      {
        id:"E-031",
        entryDate:"2023-10-04",
        residence:"Zone Nord, bloc H",
        stability:"Instable",
        placementReason:"Conflit familial chronique",
        school:"Collège Iris",
        atlocAddress:"Atloc, 7e secteur, Allée des Lampes 12",
        dangerLevel:"Élevée",
        attachment:"Maison des Enfants A",
        full:"Dossier complet autorisé"
      },
      {
        id:"E-044",
        entryDate:"2024-02-19",
        residence:"Aurore Town",
        stability:"Stabilisée",
        placementReason:"Négligence prolongée",
        school:"École Saint Paul",
        atlocAddress:"Atloc, Harlem, Rue des Serres 3",
        dangerLevel:"Modérée",
        attachment:"Communauté 1",
        full:"Dossier complet autorisé"
      },
      {
        id:"E-052",
        entryDate:"2024-11-07",
        residence:"Minecraftia Center",
        stability:"En évaluation",
        placementReason:"Rupture de prise en charge",
        school:"Lycée Auror",
        atlocAddress:"Atloc, Esplanade, Passage 9",
        dangerLevel:"Critique",
        attachment:"Maison des Enfants B",
        full:"Dossier complet autorisé"
      },
      {
        id:"E-060",
        entryDate:"2022-06-28",
        residence:"World Island",
        stability:"Instable",
        placementReason:"Exposition à violence",
        school:"Centre Iris",
        atlocAddress:"Atloc, South Hill, Chemin 41",
        dangerLevel:"Élevée",
        attachment:"Communauté 2",
        full:"Dossier complet autorisé"
      }
    ];

    /* Données incidents */
    const incidents = [
      {
        childId:"E-031",
        incidentType:"Incident",
        houseOfDeath:"Maison des Enfants A",
        location:"Atloc, secteur Nord",
        collateral:"Evacuation partielle du bâtiment",
        ghostStatus:"Présence résiduelle signalée"
      },
      {
        childId:"E-052",
        incidentType:"Incident",
        houseOfDeath:"Maison des Enfants B",
        location:"Minecraftia Center",
        collateral:"Isolement administratif",
        ghostStatus:"Dossier classé fantôme"
      },
      {
        childId:"E-060",
        incidentType:"Incident",
        houseOfDeath:"Communauté 2",
        location:"South Hill",
        collateral:"Fermeture temporaire du site",
        ghostStatus:"Statut fantôme confirmé"
      }
    ];

    /* Utilitaires affichage */
    const $ = (sel) => document.querySelector(sel);

    function showPage(id){
      document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
      $(id).classList.add("active");
    }

    function pad4(s){
      const t = String(s ?? "").trim();
      if(!/^\d{1,4}$/.test(t)) return null;
      return t.padStart(4, "0");
    }

    function redact(text){
      return `<span class="redact">${"&nbsp;".repeat(Math.max(10, String(text).length))}</span>`;
    }

    function labelStability(value){
      const v = String(value).toLowerCase();
      if(v.includes("stabil")) return `<span class="ok">${escapeHtml(value)}</span>`;
      if(v.includes("crit")) return `<span class="danger">${escapeHtml(value)}</span>`;
      if(v.includes("instable")) return `<span class="danger">${escapeHtml(value)}</span>`;
      return escapeHtml(value);
    }

    function escapeHtml(s){
      return String(s)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    function visibleDossierColumns(level){
      const cols = ["Identifiant"];
      if(level >= 2) cols.push("Date entrée");
      if(level >= 3) cols.push("Résidence");
      if(level >= 4) cols.push("Stabilité");
      if(level >= 5) cols.push("Raison placement");
      if(level >= 6) cols.push("École");
      if(level >= 7) cols.push("Adresse Atloc");
      if(level >= 8) cols.push("Dangerosité");
      if(level >= 9) cols.push("Rattachement");
      if(level >= 10) cols.push("Dossier complet");
      return cols;
    }

    function renderDossiers(level){
      const cols = visibleDossierColumns(level);

      $("#dossier-head").innerHTML = cols.map(c => `<th>${escapeHtml(c)}</th>`).join("");

      $("#dossier-body").innerHTML = children.map(ch => {
        const cells = [];
        cells.push(`<td class="mono">${escapeHtml(ch.id)}</td>`);

        if(level >= 2) cells.push(`<td class="mono">${escapeHtml(ch.entryDate)}</td>`);
        if(level >= 3) cells.push(`<td>${escapeHtml(ch.residence)}</td>`);
        if(level >= 4) cells.push(`<td>${labelStability(ch.stability)}</td>`);
        if(level >= 5) cells.push(`<td>${escapeHtml(ch.placementReason)}</td>`);
        if(level >= 6) cells.push(`<td>${escapeHtml(ch.school)}</td>`);
        if(level >= 7) cells.push(`<td>${escapeHtml(ch.atlocAddress)}</td>`);
        if(level >= 8) cells.push(`<td>${escapeHtml(ch.dangerLevel)}</td>`);
        if(level >= 9) cells.push(`<td>${escapeHtml(ch.attachment)}</td>`);
        if(level >= 10) cells.push(`<td>${escapeHtml(ch.full)}</td>`);

        return `<tr>${cells.join("")}</tr>`;
      }).join("");
    }

    function renderIncidents(level){
      $("#incident-body").innerHTML = incidents.map(row => {
        const c1 = `<td class="mono">${escapeHtml(row.childId)}</td>`;
        const c2 = `<td>${escapeHtml(row.incidentType)}</td>`;

        const c3 = level >= 7 ? `<td>${escapeHtml(row.houseOfDeath)}</td>` : `<td>${redact(row.houseOfDeath)}</td>`;
        const c4 = level >= 8 ? `<td>${escapeHtml(row.location)}</td>` : `<td>${redact(row.location)}</td>`;
        const c5 = level >= 9 ? `<td>${escapeHtml(row.collateral)}</td>` : `<td>${redact(row.collateral)}</td>`;
        const c6 = level >= 10 ? `<td>${escapeHtml(row.ghostStatus)}</td>` : `<td>${redact(row.ghostStatus)}</td>`;

        return `<tr>${c1}${c2}${c3}${c4}${c5}${c6}</tr>`;
      }).join("");
    }

    /* Loader simulation */
    const bootLines = [
      "Initializing ATLOC OPS kernel",
      "Mounting data partitions",
      "Decrypting index",
      "Verifying credentials token",
      "Loading dossier tables",
      "Applying redaction rules",
      "Starting incident registry",
      "Finalizing session context",
      "Switching interface mode: W95"
    ];

    function runLoader(onDone){
      showPage("#page-loader");
      const fill = $("#loader-fill");
      const pct = $("#loader-pct");
      const lines = $("#loader-lines");
      let p = 0;
      let lineIndex = 0;

      lines.textContent = "";

      const addLine = () => {
        const text = bootLines[lineIndex % bootLines.length];
        lines.textContent += "> " + text + "\n";
        lineIndex += 1;
        if(lines.textContent.split("\n").length > 9){
          const parts = lines.textContent.split("\n").slice(-9);
          lines.textContent = parts.join("\n");
        }
      };

      addLine();

      const tick = () => {
        const step = Math.random() < 0.15 ? 0 : (Math.random() < 0.6 ? 1 : 2);
        p = Math.min(100, p + step);

        fill.style.width = p + "%";
        pct.textContent = p + "%";
        $("#page-loader .loader-bar").setAttribute("aria-valuenow", String(p));

        if(Math.random() < 0.28) addLine();

        if(p >= 100){
          addLine();
          setTimeout(onDone, 650);
          return;
        }
        setTimeout(tick, 90 + Math.floor(Math.random() * 160));
      };

      setTimeout(tick, 480);
    }

    /* Session */
    const session = { id:null, level:0 };

    function updateClock(){
      const d = new Date();
      const hh = String(d.getHours()).padStart(2,"0");
      const mm = String(d.getMinutes()).padStart(2,"0");
      $("#clock").textContent = hh + ":" + mm;
    }
    setInterval(updateClock, 1000);
    updateClock();

    function enterW95(){
      showPage("#page-w95");
      $("#who-id").textContent = session.id;
      $("#who-level").textContent = String(session.level);
      $("#session-meta").textContent = " ID " + session.id + " | LVL " + session.level;

      renderDossiers(session.level);
      renderIncidents(session.level);

      setTab("dossier");
    }

    function setTab(which){
      const dossier = $("#view-dossier");
      const incident = $("#view-incident");

      $("#tab-dossier").classList.toggle("active", which === "dossier");
      $("#tab-incident").classList.toggle("active", which === "incident");

      $("#tab-dossier").setAttribute("aria-selected", which === "dossier" ? "true" : "false");
      $("#tab-incident").setAttribute("aria-selected", which === "incident" ? "true" : "false");

      dossier.style.display = which === "dossier" ? "block" : "none";
      incident.style.display = which === "incident" ? "block" : "none";
    }

    $("#tab-dossier").addEventListener("click", () => setTab("dossier"));
    $("#tab-incident").addEventListener("click", () => setTab("incident"));

    $("#logout").addEventListener("click", () => {
      session.id = null;
      session.level = 0;
      $("#login-id").value = "";
      $("#login-pass").value = "";
      $("#login-msg").textContent = "";
      showPage("#page-login");
    });

    /* Login */
    function attemptLogin(){
      const rawId = $("#login-id").value;
      const id = pad4(rawId);
      const pass = String($("#login-pass").value ?? "");

      if(!id){
        $("#login-msg").textContent = "Identifiant invalide.";
        return;
      }
      if(pass !== FIXED_PASSWORD){
        $("#login-msg").textContent = "Mot de passe incorrect.";
        return;
      }
      if(!(id in credentials)){
        $("#login-msg").textContent = "Accès refusé.";
        return;
      }

      session.id = id;
      session.level = credentials[id];

      $("#login-msg").textContent = "Connexion acceptée.";
      runLoader(enterW95);
    }

    $("#login-btn").addEventListener("click", attemptLogin);
    $("#login-pass").addEventListener("keydown", (e) => {
      if(e.key === "Enter") attemptLogin();
    });
    $("#login-id").addEventListener("keydown", (e) => {
      if(e.key === "Enter") attemptLogin();
    });

    /* Petites contraintes input */
    $("#login-id").addEventListener("input", (e) => {
      e.target.value = e.target.value.replace(/[^\d]/g, "").slice(0,4);
    });

  </script>
</body>
</html>
